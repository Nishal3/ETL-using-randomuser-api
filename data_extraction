import requests
import json
import pandas as pd


def extraction(val: dict, key1: str, key2: str = None) -> dict:
    if not key2:
        return val[key1]
    else:
        return val[key1][key2] if isinstance(val[key1][key2], dict) else {}


api_link = "https://randomuser.me/api/"
thing = requests.get(api_link)
# print(thing.text)

random_person_data = json.loads(thing.text)
results = random_person_data["results"][0]

# print(type(json.loads(thing.text)))

name = extraction(results, "name")
location = extraction(results, "location")
location_street = extraction(results, "location", "street")
location_street = extraction(results, "location", "street")
location_coordinates = extraction(results, "location", "coordinates")
login = extraction(results, "login")
dob = extraction(results, "dob")
registered = extraction(results, "registered")
id = extraction(results, "id")
picture = extraction(results, "picture")
results = {}

for i in random_person_data["results"][0]:
    if not isinstance(random_person_data["results"][0][i], dict):
        results[i] = random_person_data["results"][0][i]

collected_data = [name, location, login, dob, registered, id, picture, results]
for i in collected_data:
    print(i, "\n" + "-" * 50, "\n")
